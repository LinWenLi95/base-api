<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lwl.base.project.mapper.SysPermissionMapper">

    <!--查询权限url和roleName-->
    <select id="queryPermissionUrlAndRoleName" resultType="com.lwl.base.api.common.pojo.UrlRole">
        SELECT
        p.url,
        p.method,
        p.id AS permissionId,
        r.id AS roleId,
        r.en_name AS roleName
        FROM sys_permission p
        LEFT JOIN sys_role_permission rp ON rp.permission_id=p.id AND rp.is_del=0
        LEFT JOIN sys_role r ON r.id=rp.role_id AND r.is_del=0 AND r.state=1
        WHERE
        p.is_del=0
        AND p.state=1
    </select>
</mapper>
